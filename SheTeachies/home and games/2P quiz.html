<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Quiz Buzzer Battle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .pulse { animation: pulse 0.5s ease-in-out; }
        .shake { animation: shake 0.3s ease-in-out; }
        .glow { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 min-h-screen text-white font-sans">
    <!-- Game Container -->
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-2 text-yellow-300">üèÜ Database Quiz Buzzer Battle</h1>
            <div class="text-lg text-gray-300">First to 10 points wins!</div>
            <div class="text-sm text-gray-400 mt-2">Highest Score: <span id="highestScore" class="text-yellow-300 font-bold">0</span></div>
        </div>

        <!-- Players Score -->
        <div class="grid grid-cols-2 gap-8 mb-8">
            <div id="player1Card" class="bg-red-600 rounded-lg p-6 text-center transform transition-all duration-300">
                <h2 class="text-2xl font-bold mb-2">Player 1</h2>
                <div class="text-sm mb-2">Press Q to buzz</div>
                <div class="text-4xl font-bold" id="player1Score">0</div>
                <div class="text-sm mt-2">Combo: <span id="player1Combo" class="font-bold">0</span></div>
            </div>
            <div id="player2Card" class="bg-blue-600 rounded-lg p-6 text-center transform transition-all duration-300">
                <h2 class="text-2xl font-bold mb-2">Player 2</h2>
                <div class="text-sm mb-2">Press P to buzz</div>
                <div class="text-4xl font-bold" id="player2Score">0</div>
                <div class="text-sm mt-2">Combo: <span id="player2Combo" class="font-bold">0</span></div>
            </div>
        </div>

        <!-- Game Area -->
        <div class="bg-gray-800 rounded-lg p-8 mb-6">
            <!-- Countdown Display -->
            <div id="countdownDisplay" class="text-center mb-6 hidden">
                <div class="text-6xl font-bold text-yellow-300 mb-4" id="countdownNumber">3</div>
                <div class="text-2xl">Get Ready!</div>
            </div>

            <!-- Question Display -->
            <div id="questionArea" class="text-center mb-6">
                <div class="text-2xl font-bold mb-4" id="questionText">Press SPACE to start the game!</div>
                <div class="text-lg text-gray-300" id="questionHint" style="display: none;"></div>
            </div>

            <!-- Timer Display -->
            <div id="timerDisplay" class="text-center mb-6 hidden">
                <div class="text-xl mb-2">Time Remaining</div>
                <div class="w-full bg-gray-700 rounded-full h-4 mb-2">
                    <div id="timerBar" class="bg-green-500 h-4 rounded-full transition-all duration-1000" style="width: 100%"></div>
                </div>
                <div class="text-lg font-bold" id="timerText">5</div>
            </div>

            <!-- Answer Options -->
            <div id="answerOptions" class="grid grid-cols-2 gap-4 hidden">
                <button class="answer-btn bg-green-600 hover:bg-green-700 p-4 rounded-lg text-left transition-all duration-200" data-answer="A">
                    <span class="font-bold">A)</span> <span class="answer-text"></span>
                </button>
                <button class="answer-btn bg-yellow-600 hover:bg-yellow-700 p-4 rounded-lg text-left transition-all duration-200" data-answer="B">
                    <span class="font-bold">B)</span> <span class="answer-text"></span>
                </button>
                <button class="answer-btn bg-purple-600 hover:bg-purple-700 p-4 rounded-lg text-left transition-all duration-200" data-answer="C">
                    <span class="font-bold">C)</span> <span class="answer-text"></span>
                </button>
                <button class="answer-btn bg-pink-600 hover:bg-pink-700 p-4 rounded-lg text-left transition-all duration-200" data-answer="D">
                    <span class="font-bold">D)</span> <span class="answer-text"></span>
                </button>
            </div>

            <!-- Status Messages -->
            <div id="statusMessage" class="text-center text-xl font-bold mt-6 hidden"></div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="bg-gray-800 rounded-lg p-8 text-center hidden">
            <h2 class="text-4xl font-bold mb-4 text-yellow-300">üéâ Game Over!</h2>
            <div id="winnerMessage" class="text-2xl mb-6"></div>
            <div id="finalScores" class="text-lg mb-6"></div>
            <button id="playAgainBtn" class="bg-green-600 hover:bg-green-700 px-8 py-3 rounded-lg text-xl font-bold transition-all duration-200">
                Play Again
            </button>
        </div>

        <!-- Instructions -->
        <div class="text-center text-sm text-gray-400">
            <div>Player 1: Press Q to buzz | Player 2: Press P to buzz | SPACE: Start/Next Question</div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            phase: 'waiting', // waiting, countdown, buzzing, answering, checking
            currentPlayer: null,
            scores: { player1: 0, player2: 0 },
            combos: { player1: 0, player2: 0 },
            currentQuestion: 0,
            lockedPlayers: new Set(),
            timers: {
                countdown: null,
                buzz: null,
                answer: null
            }
        };

        // Questions Database
        const questions = [
            {
                question: "What does SQL stand for?",
                options: ["Structured Query Language", "Simple Query Language", "Standard Query Language", "System Query Language"],
                correct: "A",
                hint: "It's about structuring queries..."
            },
            {
                question: "Which command is used to retrieve data from a database?",
                options: ["INSERT", "SELECT", "UPDATE", "DELETE"],
                correct: "B",
                hint: "Think about choosing or picking data..."
            },
            {
                question: "What is a primary key?",
                options: ["A duplicate record", "A unique identifier for records", "A foreign reference", "A backup key"],
                correct: "B",
                hint: "It uniquely identifies something..."
            },
            {
                question: "Which SQL clause is used to filter records?",
                options: ["ORDER BY", "GROUP BY", "WHERE", "HAVING"],
                correct: "C",
                hint: "It specifies conditions..."
            },
            {
                question: "What does ACID stand for in database transactions?",
                options: ["Atomic, Consistent, Isolated, Durable", "Active, Complete, Independent, Direct", "Automatic, Controlled, Integrated, Distributed", "Advanced, Centralized, Indexed, Dynamic"],
                correct: "A",
                hint: "Think about transaction properties..."
            },
            {
                question: "Which type of JOIN returns all records from both tables?",
                options: ["INNER JOIN", "LEFT JOIN", "RIGHT JOIN", "FULL OUTER JOIN"],
                correct: "D",
                hint: "It includes everything from both sides..."
            },
            {
                question: "What is normalization in databases?",
                options: ["Making data abnormal", "Organizing data to reduce redundancy", "Creating backups", "Indexing tables"],
                correct: "B",
                hint: "It's about organizing and reducing duplication..."
            },
            {
                question: "Which command is used to add new records to a table?",
                options: ["ADD", "INSERT", "CREATE", "APPEND"],
                correct: "B",
                hint: "Think about putting something into a table..."
            }
        ];

        // Sound Effects (using Web Audio API)
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(frequency, duration, type = 'sine') {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function playBuzzSound() { playSound(800, 0.3, 'square'); }
        function playCorrectSound() { playSound(523, 0.5); playSound(659, 0.5, 'sine'); }
        function playWrongSound() { playSound(200, 0.8, 'sawtooth'); }
        function playWarningSound() { playSound(1000, 0.2, 'square'); }

        // DOM Elements
        const elements = {
            countdownDisplay: document.getElementById('countdownDisplay'),
            countdownNumber: document.getElementById('countdownNumber'),
            questionArea: document.getElementById('questionArea'),
            questionText: document.getElementById('questionText'),
            questionHint: document.getElementById('questionHint'),
            timerDisplay: document.getElementById('timerDisplay'),
            timerBar: document.getElementById('timerBar'),
            timerText: document.getElementById('timerText'),
            answerOptions: document.getElementById('answerOptions'),
            statusMessage: document.getElementById('statusMessage'),
            gameOverScreen: document.getElementById('gameOverScreen'),
            player1Card: document.getElementById('player1Card'),
            player2Card: document.getElementById('player2Card'),
            player1Score: document.getElementById('player1Score'),
            player2Score: document.getElementById('player2Score'),
            player1Combo: document.getElementById('player1Combo'),
            player2Combo: document.getElementById('player2Combo'),
            playAgainBtn: document.getElementById('playAgainBtn'),
            winnerMessage: document.getElementById('winnerMessage'),
            finalScores: document.getElementById('finalScores'),
            highestScore: document.getElementById('highestScore')
        };

        // Clear all timers
        function clearAllTimers() {
            Object.values(gameState.timers).forEach(timer => {
                if (timer) clearInterval(timer);
            });
            gameState.timers = { countdown: null, buzz: null, answer: null };
        }

        // Update UI
        function updateScores() {
            elements.player1Score.textContent = gameState.scores.player1;
            elements.player2Score.textContent = gameState.scores.player2;
            elements.player1Combo.textContent = gameState.combos.player1;
            elements.player2Combo.textContent = gameState.combos.player2;
        }

        function showStatus(message, className = '') {
            elements.statusMessage.textContent = message;
            elements.statusMessage.className = `text-center text-xl font-bold mt-6 ${className}`;
            elements.statusMessage.style.display = 'block';
            setTimeout(() => {
                elements.statusMessage.style.display = 'none';
            }, 2000);
        }

        function highlightPlayer(player) {
            elements.player1Card.classList.remove('glow', 'pulse');
            elements.player2Card.classList.remove('glow', 'pulse');
            
            if (player === 'player1') {
                elements.player1Card.classList.add('glow', 'pulse');
            } else if (player === 'player2') {
                elements.player2Card.classList.add('glow', 'pulse');
            }
        }

        // Game Phases
        function startCountdown() {
            gameState.phase = 'countdown';
            gameState.lockedPlayers.clear();
            clearAllTimers();
            
            elements.countdownDisplay.style.display = 'block';
            elements.timerDisplay.style.display = 'none';
            elements.answerOptions.style.display = 'none';
            elements.questionHint.style.display = 'none';
            
            let count = 3;
            elements.countdownNumber.textContent = count;
            
            gameState.timers.countdown = setInterval(() => {
                count--;
                if (count > 0) {
                    elements.countdownNumber.textContent = count;
                } else {
                    clearInterval(gameState.timers.countdown);
                    startBuzzPhase();
                }
            }, 1000);
        }

        function startBuzzPhase() {
            gameState.phase = 'buzzing';
            gameState.currentPlayer = null;
            
            elements.countdownDisplay.style.display = 'none';
            elements.timerDisplay.style.display = 'block';
            
            // Display current question
            const question = questions[gameState.currentQuestion];
            elements.questionText.textContent = question.question;
            
            // Start buzz timer
            let timeLeft = 5;
            elements.timerText.textContent = timeLeft;
            elements.timerBar.style.width = '100%';
            elements.timerBar.className = 'bg-green-500 h-4 rounded-full transition-all duration-1000';
            
            gameState.timers.buzz = setInterval(() => {
                timeLeft--;
                elements.timerText.textContent = timeLeft;
                elements.timerBar.style.width = `${(timeLeft / 5) * 100}%`;
                
                if (timeLeft <= 2) {
                    elements.timerBar.className = 'bg-red-500 h-4 rounded-full transition-all duration-1000';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(gameState.timers.buzz);
                    showHint();
                }
            }, 1000);
        }

        function showHint() {
            const question = questions[gameState.currentQuestion];
            elements.questionHint.textContent = `Hint: ${question.hint}`;
            elements.questionHint.style.display = 'block';
            showStatus('Time\'s up! Here\'s a hint...', 'text-yellow-300');
            
            setTimeout(() => {
                nextQuestion();
            }, 3000);
        }

        function playerBuzzed(player) {
            if (gameState.phase !== 'buzzing' || gameState.lockedPlayers.has(player)) {
                return;
            }
            
            if (gameState.phase === 'countdown') {
                // Early buzz - lock player
                gameState.lockedPlayers.add(player);
                playWarningSound();
                showStatus(`${player === 'player1' ? 'Player 1' : 'Player 2'} buzzed too early!`, 'text-red-400');
                elements[`${player}Card`].classList.add('shake');
                setTimeout(() => elements[`${player}Card`].classList.remove('shake'), 300);
                return;
            }
            
            gameState.currentPlayer = player;
            gameState.phase = 'answering';
            clearAllTimers();
            
            playBuzzSound();
            highlightPlayer(player);
            showAnswerOptions();
        }

        function showAnswerOptions() {
            const question = questions[gameState.currentQuestion];
            elements.answerOptions.style.display = 'grid';
            elements.timerDisplay.style.display = 'block';
            
            // Populate answer options
            const answerButtons = document.querySelectorAll('.answer-btn');
            answerButtons.forEach((btn, index) => {
                const answerText = btn.querySelector('.answer-text');
                answerText.textContent = question.options[index];
                btn.onclick = () => checkAnswer(btn.dataset.answer);
            });
            
            // Start answer timer
            let timeLeft = 10;
            elements.timerText.textContent = timeLeft;
            elements.timerBar.style.width = '100%';
            elements.timerBar.className = 'bg-blue-500 h-4 rounded-full transition-all duration-1000';
            
            gameState.timers.answer = setInterval(() => {
                timeLeft--;
                elements.timerText.textContent = timeLeft;
                elements.timerBar.style.width = `${(timeLeft / 10) * 100}%`;
                
                if (timeLeft <= 3) {
                    elements.timerBar.className = 'bg-red-500 h-4 rounded-full transition-all duration-1000';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(gameState.timers.answer);
                    timeUp();
                }
            }, 1000);
        }

        function timeUp() {
            showStatus('Time\'s up! Chance passes to other player.', 'text-yellow-300');
            
            // Pass chance to other player
            const otherPlayer = gameState.currentPlayer === 'player1' ? 'player2' : 'player1';
            gameState.currentPlayer = otherPlayer;
            highlightPlayer(otherPlayer);
            showAnswerOptions();
        }

        function checkAnswer(selectedAnswer) {
            clearAllTimers();
            const question = questions[gameState.currentQuestion];
            const isCorrect = selectedAnswer === question.correct;
            
            if (isCorrect) {
                playCorrectSound();
                
                // Award points with combo bonus
                const basePoints = 1;
                const comboBonus = gameState.combos[gameState.currentPlayer];
                const totalPoints = basePoints + comboBonus;
                
                gameState.scores[gameState.currentPlayer] += totalPoints;
                gameState.combos[gameState.currentPlayer]++;
                
                // Reset other player's combo
                const otherPlayer = gameState.currentPlayer === 'player1' ? 'player2' : 'player1';
                gameState.combos[otherPlayer] = 0;
                
                showStatus(`Correct! +${totalPoints} points (${comboBonus} combo bonus)`, 'text-green-400');
                
                updateScores();
                
                // Check for winner
                if (gameState.scores[gameState.currentPlayer] >= 10) {
                    endGame();
                    return;
                }
                
                setTimeout(() => nextQuestion(), 2000);
                
            } else {
                playWrongSound();
                gameState.combos[gameState.currentPlayer] = 0;
                
                showStatus('Wrong answer! Chance passes to other player.', 'text-red-400');
                
                // Pass to other player
                const otherPlayer = gameState.currentPlayer === 'player1' ? 'player2' : 'player1';
                gameState.currentPlayer = otherPlayer;
                highlightPlayer(otherPlayer);
                
                setTimeout(() => showAnswerOptions(), 2000);
            }
        }

        function nextQuestion() {
            gameState.currentQuestion = (gameState.currentQuestion + 1) % questions.length;
            gameState.phase = 'waiting';
            gameState.currentPlayer = null;
            
            clearAllTimers();
            highlightPlayer(null);
            
            elements.answerOptions.style.display = 'none';
            elements.timerDisplay.style.display = 'none';
            elements.questionHint.style.display = 'none';
            elements.questionText.textContent = 'Press SPACE for next question!';
        }

        function endGame() {
            gameState.phase = 'gameOver';
            clearAllTimers();
            
            const winner = gameState.scores.player1 > gameState.scores.player2 ? 'Player 1' : 'Player 2';
            const winnerScore = Math.max(gameState.scores.player1, gameState.scores.player2);
            
            // Update highest score
            const currentHighest = parseInt(elements.highestScore.textContent);
            if (winnerScore > currentHighest) {
                elements.highestScore.textContent = winnerScore;
                localStorage.setItem('highestScore', winnerScore);
            }
            
            elements.winnerMessage.textContent = `${winner} Wins!`;
            elements.finalScores.textContent = `Final Score - Player 1: ${gameState.scores.player1} | Player 2: ${gameState.scores.player2}`;
            
            elements.gameOverScreen.style.display = 'block';
            elements.questionArea.style.display = 'none';
            elements.timerDisplay.style.display = 'none';
            elements.answerOptions.style.display = 'none';
        }

        function resetGame() {
            gameState = {
                phase: 'waiting',
                currentPlayer: null,
                scores: { player1: 0, player2: 0 },
                combos: { player1: 0, player2: 0 },
                currentQuestion: 0,
                lockedPlayers: new Set(),
                timers: { countdown: null, buzz: null, answer: null }
            };
            
            clearAllTimers();
            highlightPlayer(null);
            updateScores();
            
            elements.gameOverScreen.style.display = 'none';
            elements.questionArea.style.display = 'block';
            elements.questionText.textContent = 'Press SPACE to start the game!';
            elements.answerOptions.style.display = 'none';
            elements.timerDisplay.style.display = 'none';
            elements.countdownDisplay.style.display = 'none';
            elements.questionHint.style.display = 'none';
        }

        // Event Listeners
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (gameState.phase === 'waiting') {
                    startCountdown();
                }
            } else if (e.code === 'KeyQ') {
                e.preventDefault();
                playerBuzzed('player1');
            } else if (e.code === 'KeyP') {
                e.preventDefault();
                playerBuzzed('player2');
            }
        });

        elements.playAgainBtn.addEventListener('click', resetGame);

        // Initialize
        const savedHighScore = localStorage.getItem('highestScore');
        if (savedHighScore) {
            elements.highestScore.textContent = savedHighScore;
        }
        
        updateScores();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'980eb9b1127bc0c2',t:'MTc1ODE3NjMwMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

